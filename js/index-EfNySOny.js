import{a as U,f as v,R as Z,o as b,u as z,r as u,m as L,M as j,b as W,d as Q,c as q,j as n,C as D,e as Y,L as _,I as M,E as J}from"./index-lE5ByJvB.js";import{s as t,a as T,b as R,c as h,d as i,B as $}from"./index-tTzuzc_F.js";/*!
 * sc2-bank-generator v.1.1.0
 *
 * Compiled from:
 *
 * sc2-bank-generator/src/components/maps/mineralz-evolution/store.ts
 * sc2-bank-generator/src/components/maps/mineralz-evolution/functions.ts
 * sc2-bank-generator/src/components/maps/mineralz-evolution/index.tsx
 *
 * Ð¡ompiled on Sat, 09 Dec 2023 21:18:25 UTC
 */class k{constructor(){this.init(),U(this)}setFields(e){this.params=e?[...e]:[]}updateAt(e,o,a){if(a){this.params[e].value=o;return}const c=[...this.params];c[e].value=o,this.params=c}reset(){this.init()}init(){const e=v(1,40);let o=e*20;const a=Math.floor(v(o*.3,o*.5));o-=a;const c=Math.floor(v(o*.2,o*.4));o-=c;const p=Math.floor(v(o*.1,o*.3));o-=p;const d=Math.floor(v(o*.2,o*.5));o-=d;const S=o,f=e>0?e>5?35:v(0,15):0;this.params=[{type:"number",value:e,description:"Prestige",min:0,max:100,tip:"0 - 100"},{type:"number",value:v(25,175),description:"Level",min:1,max:200,tip:"1 - 200"},{type:"number",value:v(25,125),description:"Wins",min:0,max:419,tip:"0 - 419"},{type:"number",value:35,description:"Nights",min:0,max:35,tip:"0 - 35"},{type:"number",value:35,description:"Elite",min:0,max:35,tip:"0 - 35"},{type:"number",value:35,description:"Nightmare",min:0,max:35,tip:"0 - 35"},{type:"number",value:35,description:"Hell",min:0,max:35,tip:"0 - 35"},{type:"number",value:f,description:"Impossible",min:0,max:35,tip:"0 - 35"},{type:"number",value:c,description:"Wall",min:0,max:999999},{type:"number",value:p,description:"Cannons",min:0,max:999999},{type:"number",value:d,description:"Healer",min:0,max:999999},{type:"number",value:S,description:"Generator",min:0,max:999999},{type:"number",value:a,description:"Economy",min:0,max:999999}]}}const r=new k;class ee{generateXML(e){const o=58.70751953125,a=12,c=22,p=2,d=26,S=18,f=40,y=662,g=1,m=parseInt(e.info.playerID.substring(8)),x=r.params[0].value;if(x>0){e.addKey("PHR","INT",x,"Sec");let I=0;if(x>42){for(let E=0;E<42;E++)I=(I+39)*1.2;e.addKey("PHR2","INT",x-42,"Sec")}else for(let E=0;E<x;E++)I=(I+39)*1.2;e.addKey("PR","FIXED",I,"Sec")}else e.removeKey("PR","Sec"),e.removeKey("PHR","Sec");const s=r.params[1].value;e.addKey("NIVO","FIXED",s,"Sec"),e.addKey("NIVEXP","FIXED",s*1224,"Sec"),e.addKey("EXPP","FIXED",v(1,25)*s,"Sec");const l=r.params[2].value;e.addKey("WINS","FIXED",l,"Sec");const K=r.params[3].value;K>0?(e.addKey("NIGHTMNHD","FIXED",K,"Sec"),e.addKey("KILLED","FIXED",K*4788,"Sec"),K>=35?e.addKey("ZUHIB","FIXED",121186,"Sec"):e.removeKey("ZUHIB","Sec")):(e.removeKey("NIGHTMNHD","Sec"),e.removeKey("KILLED","Sec"),e.removeKey("ZUHIB","Sec"));const X=r.params[4].value;X>0?(e.addKey("NIGHTELITE","FIXED",X,"Sec"),X>=35&&e.addKey("HEAL","FIXED",21634,"Sec")):(e.removeKey("NIGHTELITE","Sec"),e.removeKey("HEAL","Sec"));const F=r.params[5].value;F>0?(e.addKey("NIGHTNMAR","FIXED",F,"Sec"),e.addKey("XPNB","FIXED",F*1655,"Sec"),F>=35&&e.addKey("XPNQ","FIXED",59120,"Sec")):(e.removeKey("NIGHTNMAR","Sec"),e.removeKey("XPNB","Sec"),e.removeKey("XPNQ","Sec"));const H=r.params[6].value;H>0?(e.addKey("HL","FIXED",H,"Sec"),e.addKey("HAL","FIXED",H*1631,"Sec"),H>=35&&e.addKey("HLO","FIXED",25265,"Sec")):(e.removeKey("HL","Sec"),e.removeKey("HAL","Sec"),e.removeKey("HLO","Sec"));const N=r.params[7].value;if(N>0){e.addKey("ims","INT",N,"Sec");const I=Math.abs(t(h(N,10),Math.abs(t(T(R(h(t(h(t(o,i(5)),t(86,i(8)),t(a,i(3)),t(c,i(2)),t(p,i(7)),t(d,i(3)),t(S,i(6)),t(f,i(7)),t(y,i(5)),t(g,i(3)),t(m,65537)),i(3)),1e4)),1e3),10))));if(e.addKey("im","FIXED",h(I+N,10),"Sec"),N>=35){const E=T(R(h(t(h(t(o,i(3)),t(86,i(2)),t(a,i(7)),t(c,i(8)),t(p,i(17)),t(d,i(3)),t(S,i(2)),t(f,i(5)),t(y,i(11)),t(g,i(5)),t(m,65537)),i(10)),1e4)),1e3);e.addKey("is","FIXED",h(T(I,E),3.4),"Sec");const V=T(R(h(t(h(t(o,i(2)),t(86,i(3)),t(a,i(6)),t(c,i(5)),t(p,i(7)),t(d,i(3)),t(S,i(2)),t(f,i(5)),t(y,i(11)),t(g,i(5)),t(m,65537)),i(10)),1e4)),1e3);e.addKey("imval","FIXED",V,"Sec")}else e.removeKey("is","Sec"),e.removeKey("imval","Sec")}else e.removeKey("ims","Sec"),e.removeKey("im","Sec"),e.removeKey("is","Sec"),e.removeKey("imval","Sec");const A=r.params[8].value;A>0?e.addKey("a","INT",A*4,"Sec"):e.removeKey("a","Sec");const P=r.params[9].value;P>0?e.addKey("e","INT",P*7,"Sec"):e.removeKey("e","Sec");const O=r.params[10].value;O>0?e.addKey("i","INT",O*9,"Sec"):e.removeKey("i","Sec");const B=r.params[11].value;B>0?e.addKey("f","INT",B*5,"Sec"):e.removeKey("f","Sec");const G=r.params[12].value;return G>0?e.addKey("o","INT",G*13,"Sec"):e.removeKey("o","Sec"),e.addKey("EASY","FIXED",35,"Sec"),e.addKey("VERSION","FIXED",6,"Sec"),e.updateSignature(),e.getAsString()}parse(e,o){return e.parse(o),e.sections.size!=1||e.sections.get("Sec")==null?(console.error("Wrong bank file!"),null):[{type:"number",value:this.getKey(e,"PHR"),description:"Prestige",min:0,max:40,tip:"0 - 40"},{type:"number",value:this.getKey(e,"NIVO"),description:"Level",min:1,max:200,tip:"1 - 200"},{type:"number",value:this.getKey(e,"WINS"),description:"Wins",min:0,max:999999},{type:"number",value:this.getKey(e,"NIGHTMNHD"),description:"Nights",min:0,max:35,tip:"0 - 35"},{type:"number",value:this.getKey(e,"NIGHTELITE"),description:"Elite",min:0,max:35,tip:"0 - 35"},{type:"number",value:this.getKey(e,"NIGHTNMAR"),description:"Nightmare",min:0,max:35,tip:"0 - 35"},{type:"number",value:this.getKey(e,"HL"),description:"Hell",min:0,max:35,tip:"0 - 35"},{type:"number",value:this.getKey(e,"ims"),description:"Impossible",min:0,max:35,tip:"0 - 35"},{type:"number",value:this.getKey(e,"a")/4,description:"Wall",min:0,max:999999},{type:"number",value:this.getKey(e,"e")/7,description:"Cannons",min:0,max:999999},{type:"number",value:this.getKey(e,"i")/9,description:"Healer",min:0,max:999999},{type:"number",value:this.getKey(e,"f")/5,description:"Generator",min:0,max:999999},{type:"number",value:this.getKey(e,"o")/13,description:"Economy",min:0,max:999999}]}getKey(e,o){const a=e.getKey(o,"Sec");return a?parseInt(a.value):0}}const w=new ee,te=b(C=>{const{accountStore:e,menuStore:o,mapStore:a}=z(),[c,p]=u.useState(C.bankName),[d,S]=u.useState(L.get(j.MINERALZ_EVOLUTION).authorID),f=L.get(j.MINERALZ_EVOLUTION).title,y=u.useMemo(()=>new $(c,d,o.playerID,"1"),[e.current,o.playerID,c,d]),g=()=>{a.setMapData(e.current,f,r.params)};u.useEffect(()=>{var l;const s=(l=a.list[e.current])==null?void 0:l[f];s?r.setFields(s):setTimeout(m.onResetClick)},[e.current]);const m={onBankNameChange:u.useCallback(s=>{p(s)},[]),onAuthorIdChange:u.useCallback(s=>{S(s)},[]),onFileDrop:u.useCallback((s,l)=>{const K=w.parse(y,l);K&&(W.flushSync(()=>r.setFields()),r.setFields(K))},[]),onDownloadClick:u.useCallback(()=>{Q(w.generateXML(y),c+".SC2Bank",!0),o.autoSave||g()},[y]),onCopyCodeClick:u.useCallback(()=>{q(w.generateXML(y),!0),o.autoSave||g()},[y]),onResetClick:u.useCallback(()=>{p(C.bankName),S(L.get(j.MINERALZ_EVOLUTION).authorID),W.flushSync(()=>r.setFields()),r.reset()},[]),onFieldChange:u.useCallback((s,l)=>{r.updateAt(l,parseInt(s),!0),o.autoSave&&g()},[])},x=u.useMemo(()=>n.jsxs(D,{style:{flexDirection:"column"},children:[n.jsxs(Y,{style:{width:"500px"},children:["Note: the community of this map closely monitors the statistics of the players, their skills and match history, so ",n.jsx("b",{children:"use the hack wisely!"}),n.jsx("br",{}),n.jsx("br",{}),"The ",n.jsx("b",{children:"Reset"})," button generates random real stats, but avoid using it with more than ",n.jsx("b",{children:"5 Prestige"})," / ",n.jsx("b",{children:"5 Impossible"}),".",n.jsx("br",{}),"Or add ",n.jsx("b",{children:"+20 levels"})," / ",n.jsx("b",{children:"+5 wins"})," / ",n.jsx("b",{children:"+2 role wins"})," after every game to looks legit.",n.jsx("br",{})]}),n.jsx(_,{children:"Main stats:"}),n.jsx(D,{style:{flexDirection:"row",border:"1px solid #ffffff40",padding:"10px",justifyContent:"space-around"},alignInputs:!0,children:r.params.map((s,l)=>l<3?n.jsx(M,{index:l,type:"number",style:{width:"50px"},label:s.description+":",onChange:m.onFieldChange,min:s.min.toString(),max:s.max.toString(),value:s.value.toString(),tip:s.tip?s.tip:null},l):null)}),n.jsx(_,{children:"Survived nights and roles:"}),n.jsxs(D,{style:{flexDirection:"row"},children:[n.jsx(D,{style:{flexDirection:"column",border:"1px solid #ffffff40",padding:"10px"},alignInputs:!0,children:r.params.map((s,l)=>l>=3&&l<8?n.jsx(M,{index:l,type:"number",style:{width:"30px"},label:s.description+":",onChange:m.onFieldChange,min:s.min.toString(),max:s.max.toString(),value:s.value.toString(),tip:s.tip?s.tip:null},l):null)}),n.jsx(D,{style:{flexDirection:"column",border:"1px solid #ffffff40",padding:"10px"},alignInputs:!0,children:r.params.map((s,l)=>l>=8?n.jsx(M,{index:l,type:"number",style:{width:"50px"},label:s.description+":",onChange:m.onFieldChange,min:s.min.toString(),max:s.max.toString(),value:s.value.toString(),tip:s.tip?s.tip:null},l):null)})]})]}),[r.params]);return n.jsx(J,{bankName:c,authorID:d,onBankNameChange:m.onBankNameChange,onAuthorIdChange:m.onAuthorIdChange,onFileDrop:m.onFileDrop,onDownload:m.onDownloadClick,onCopy:m.onCopyCodeClick,onReset:m.onResetClick,children:x})}),oe=Z.memo(te);export{oe as default};
