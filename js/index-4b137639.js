import{a as G,R as V,o as W,u as U,r as c,m as H,M as L,b as O,d as Z,c as _,j as l,C as x,e as z,L as P,I as T,E as Q}from"./index-926fc4ef.js";import{s as t,a as s,B as q}from"./index-ece6edac.js";/*!
 * sc2-bank-generator v.1.0.8
 *
 * Compiled from:
 *
 * sc2-bank-generator/src/components/maps/mineralz-evolution/store.ts
 * sc2-bank-generator/src/components/maps/mineralz-evolution/functions.ts
 * sc2-bank-generator/src/components/maps/mineralz-evolution/index.tsx
 *
 * Ð¡ompiled on Mon, 21 Aug 2023 21:50:40 UTC
 */class Y{constructor(){this.init(),G(this)}setFields(e){this.params=e?[...e]:[]}updateAt(e,n,m){if(m){this.params[e].value=n;return}const u=[...this.params];u[e].value=n,this.params=u}reset(){this.init()}init(){this.params=[{type:"number",value:12,description:"Prestige",min:0,max:12,tip:"0 - 12"},{type:"number",value:200,description:"Level",min:1,max:200,tip:"1 - 200"},{type:"number",value:125,description:"Wins",min:0,max:999999},{type:"number",value:35,description:"Nights",min:0,max:35,tip:"0 - 35"},{type:"number",value:35,description:"Elite",min:0,max:35,tip:"0 - 35"},{type:"number",value:35,description:"Nightmare",min:0,max:35,tip:"0 - 35"},{type:"number",value:35,description:"Hell",min:0,max:35,tip:"0 - 35"},{type:"number",value:35,description:"Impossible",min:0,max:35,tip:"0 - 35"},{type:"number",value:125,description:"Wall",min:0,max:999999},{type:"number",value:125,description:"Cannons",min:0,max:999999},{type:"number",value:125,description:"Healer",min:0,max:999999},{type:"number",value:125,description:"Generator",min:0,max:999999},{type:"number",value:125,description:"Economy",min:0,max:999999}]}}const r=new Y;class J{generateXML(e){const n=58.7077197265625,m=12,u=22,S=2,d=26,h=18,I=40,p=662,y=1,a=parseInt(e.info.playerID.substring(7)),K=r.params[0].value;if(K>0){e.addKey("PHR","INT",K,"Sec");let f=0;for(let C=0;C<K;C++)f=(f+39)*1.2;e.addKey("PR","FIXED",f,"Sec")}else e.removeKey("PR","Sec"),e.removeKey("PHR","Sec");const i=r.params[1].value;e.addKey("NIVO","FIXED",i,"Sec"),e.addKey("NIVEXP","FIXED",i*1224,"Sec");const o=r.params[2].value;e.addKey("WINS","FIXED",o,"Sec");const v=r.params[3].value;v>0?(e.addKey("NIGHTMNHD","FIXED",v,"Sec"),e.addKey("KILLED","FIXED",v*4788,"Sec"),v>=35?e.addKey("ZUHIB","FIXED",121186,"Sec"):e.removeKey("ZUHIB","Sec")):(e.removeKey("NIGHTMNHD","Sec"),e.removeKey("KILLED","Sec"),e.removeKey("ZUHIB","Sec"));const F=r.params[4].value;F>0?(e.addKey("NIGHTELITE","FIXED",F,"Sec"),F>=35&&e.addKey("HEAL","FIXED",21634,"Sec")):(e.removeKey("NIGHTELITE","Sec"),e.removeKey("HEAL","Sec"));const N=r.params[5].value;N>0?(e.addKey("NIGHTNMAR","FIXED",N,"Sec"),e.addKey("XPNB","FIXED",N*1655,"Sec"),N>=35&&e.addKey("XPNQ","FIXED",59120,"Sec")):(e.removeKey("NIGHTNMAR","Sec"),e.removeKey("XPNB","Sec"),e.removeKey("XPNQ","Sec"));const D=r.params[6].value;D>0?(e.addKey("HL","FIXED",D,"Sec"),e.addKey("HAL","FIXED",D*1631,"Sec"),D>=35&&e.addKey("HLO","FIXED",25265,"Sec")):(e.removeKey("HL","Sec"),e.removeKey("HAL","Sec"),e.removeKey("HLO","Sec"));const g=r.params[7].value;if(g>0){e.addKey("ims","INT",g,"Sec");const f=Math.abs(t(g*10,Math.abs(t(Math.round(t(t(n,s(5))*t(86,s(8))*t(m,s(3))*t(u,s(2))*t(S,s(7))*t(d,s(3))*t(h,s(6))*t(I,s(7))*t(p,s(5))*t(y,s(3))*t(a,65537),s(3))*1e4)/1e3,10))));if(e.addKey("im","FIXED",f+g*10,"Sec"),g>=35){const C=Math.round(t(t(n,s(3))*t(86,s(2))*t(m,s(7))*t(u,s(8))*t(S,s(17))*t(d,s(3))*t(h,s(2))*t(I,s(5))*t(p,s(11))*t(y,s(5))*t(a,65537),s(10))*1e4)/1e3;e.addKey("is","FIXED",f/C*3.4,"Sec");const B=Math.round(t(t(n,s(2))*t(86,s(3))*t(m,s(6))*t(u,s(5))*t(S,s(7))*t(d,s(3))*t(h,s(2))*t(I,s(5))*t(p,s(11))*t(y,s(5))*t(a,65537),s(10))*1e4)/1e3;e.addKey("imval","FIXED",B,"Sec")}else e.removeKey("imval","Sec")}else e.removeKey("HL","Sec"),e.removeKey("HAL","Sec"),e.removeKey("HLO","Sec"),e.removeKey("imval","Sec");const M=r.params[8].value;M>0?e.addKey("a","INT",M*4,"Sec"):e.removeKey("a","Sec");const A=r.params[9].value;A>0?e.addKey("e","INT",A*7,"Sec"):e.removeKey("e","Sec");const R=r.params[10].value;R>0?e.addKey("i","INT",R*9,"Sec"):e.removeKey("i","Sec");const j=r.params[11].value;j>0?e.addKey("f","INT",j*5,"Sec"):e.removeKey("f","Sec");const w=r.params[12].value;return w>0?e.addKey("o","INT",w*13,"Sec"):e.removeKey("o","Sec"),e.addKey("EASY","FIXED",35,"Sec"),e.addKey("VERSION","FIXED",6,"Sec"),e.updateSignature(),e.getAsString()}parse(e,n){return e.parse(n),e.sections.size!=1||e.sections.get("Sec")==null?(console.error("Wrong bank file!"),null):[{type:"number",value:this.getKey(e,"PHR"),description:"Prestige",min:0,max:12,tip:"0 - 12"},{type:"number",value:this.getKey(e,"NIVO"),description:"Level",min:1,max:200,tip:"1 - 200"},{type:"number",value:this.getKey(e,"WINS"),description:"Wins",min:0,max:999999},{type:"number",value:this.getKey(e,"NIGHTMNHD"),description:"Nights",min:0,max:35,tip:"0 - 35"},{type:"number",value:this.getKey(e,"NIGHTELITE"),description:"Elite",min:0,max:35,tip:"0 - 35"},{type:"number",value:this.getKey(e,"NIGHTNMAR"),description:"Nightmare",min:0,max:35,tip:"0 - 35"},{type:"number",value:this.getKey(e,"HL"),description:"Hell",min:0,max:35,tip:"0 - 35"},{type:"number",value:this.getKey(e,"ims"),description:"Impossible",min:0,max:35,tip:"0 - 35"},{type:"number",value:this.getKey(e,"a")/4,description:"Wall",min:0,max:999999},{type:"number",value:this.getKey(e,"e")/7,description:"Cannons",min:0,max:999999},{type:"number",value:this.getKey(e,"i")/9,description:"Healer",min:0,max:999999},{type:"number",value:this.getKey(e,"f")/5,description:"Generator",min:0,max:999999},{type:"number",value:this.getKey(e,"o")/13,description:"Economy",min:0,max:999999}]}getKey(e,n){const m=e.getKey(n,"Sec");return m?parseInt(m.value):0}}const X=new J,$=W(E=>{const{accountStore:e,menuStore:n,mapStore:m}=U(),[u,S]=c.useState(E.bankName),[d,h]=c.useState(H.get(L.MINERALZ_EVOLUTION).authorID),I=H.get(L.MINERALZ_EVOLUTION).title,p=c.useMemo(()=>new q(u,d,n.playerID,"1"),[e.current,n.playerID,u,d]),y=()=>{m.setMapData(e.current,I,r.params)};c.useEffect(()=>{var o;const i=(o=m.list[e.current])==null?void 0:o[I];i?r.setFields(i):setTimeout(a.onResetClick)},[e.current]);const a={onBankNameChange:c.useCallback(i=>{S(i)},[]),onAuthorIdChange:c.useCallback(i=>{h(i)},[]),onFileDrop:c.useCallback((i,o)=>{const v=X.parse(p,o);v&&(O.flushSync(()=>r.setFields()),r.setFields(v))},[]),onDownloadClick:c.useCallback(()=>{Z(X.generateXML(p),u+".SC2Bank",!0),n.autoSave||y()},[p]),onCopyCodeClick:c.useCallback(()=>{_(X.generateXML(p),!0),n.autoSave||y()},[p]),onResetClick:c.useCallback(()=>{S(E.bankName),h(H.get(L.MINERALZ_EVOLUTION).authorID),O.flushSync(()=>r.setFields()),r.reset()},[]),onFieldChange:c.useCallback((i,o)=>{r.updateAt(o,parseInt(i),!0),n.autoSave&&y()},[])},K=c.useMemo(()=>l.jsxs(x,{style:{flexDirection:"column"},children:[l.jsxs(z,{style:{width:"500px"},children:["Note: this map has a votekick system!",l.jsx("br",{}),"Avoid using unrealistic values in public lobbies.",l.jsx("br",{})]}),l.jsx(P,{children:"Main stats:"}),l.jsx(x,{style:{flexDirection:"row",border:"1px solid #ffffff40",padding:"10px",justifyContent:"space-around"},alignInputs:!0,children:r.params.map((i,o)=>o<3?l.jsx(T,{index:o,type:"number",style:{width:"50px"},label:i.description+":",onChange:a.onFieldChange,min:i.min.toString(),max:i.max.toString(),value:i.value.toString(),tip:i.tip?i.tip:null},o):null)}),l.jsx(P,{children:"Survived nights and roles:"}),l.jsxs(x,{style:{flexDirection:"row"},children:[l.jsx(x,{style:{flexDirection:"column",border:"1px solid #ffffff40",padding:"10px"},alignInputs:!0,children:r.params.map((i,o)=>o>=3&&o<8?l.jsx(T,{index:o,type:"number",style:{width:"30px"},label:i.description+":",onChange:a.onFieldChange,min:i.min.toString(),max:i.max.toString(),value:i.value.toString(),tip:i.tip?i.tip:null},o):null)}),l.jsx(x,{style:{flexDirection:"column",border:"1px solid #ffffff40",padding:"10px"},alignInputs:!0,children:r.params.map((i,o)=>o>=8?l.jsx(T,{index:o,type:"number",style:{width:"50px"},label:i.description+":",onChange:a.onFieldChange,min:i.min.toString(),max:i.max.toString(),value:i.value.toString(),tip:i.tip?i.tip:null},o):null)})]})]}),[r.params]);return l.jsx(Q,{bankName:u,authorID:d,onBankNameChange:a.onBankNameChange,onAuthorIdChange:a.onAuthorIdChange,onFileDrop:a.onFileDrop,onDownload:a.onDownloadClick,onCopy:a.onCopyCodeClick,onReset:a.onResetClick,children:K})}),ee=V.memo($);export{ee as default};
