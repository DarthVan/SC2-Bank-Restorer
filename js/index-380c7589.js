import{a as W,b as v,R as U,o as V,u as Z,r as u,m as L,M as T,e as O,d as b,c as _,j as a,C as E,f as z,L as B,I as M,E as Q}from"./index-92917109.js";import{s as t,a as i,B as q}from"./index-7f516de8.js";/*!
 * sc2-bank-generator v.1.0.8
 *
 * Compiled from:
 *
 * sc2-bank-generator/src/components/maps/mineralz-evolution/store.ts
 * sc2-bank-generator/src/components/maps/mineralz-evolution/functions.ts
 * sc2-bank-generator/src/components/maps/mineralz-evolution/index.tsx
 *
 * Ð¡ompiled on Sun, 27 Aug 2023 20:20:06 UTC
 */class Y{constructor(){this.init(),W(this)}setFields(e){this.params=e?[...e]:[]}updateAt(e,r,l){if(l){this.params[e].value=r;return}const c=[...this.params];c[e].value=r,this.params=c}reset(){this.init()}init(){const e=v(1,40);let r=e*20;const l=Math.floor(v(r*.3,r*.5));r-=l;const c=Math.floor(v(r*.2,r*.4));r-=c;const d=Math.floor(v(r*.1,r*.3));r-=d;const p=Math.floor(v(r*.2,r*.5));r-=p;const h=r;this.params=[{type:"number",value:e,description:"Prestige",min:0,max:40,tip:"0 - 40"},{type:"number",value:v(25,175),description:"Level",min:1,max:200,tip:"1 - 200"},{type:"number",value:v(25,125),description:"Wins",min:0,max:999999},{type:"number",value:35,description:"Nights",min:0,max:35,tip:"0 - 35"},{type:"number",value:35,description:"Elite",min:0,max:35,tip:"0 - 35"},{type:"number",value:35,description:"Nightmare",min:0,max:35,tip:"0 - 35"},{type:"number",value:35,description:"Hell",min:0,max:35,tip:"0 - 35"},{type:"number",value:v(0,35),description:"Impossible",min:0,max:35,tip:"0 - 35"},{type:"number",value:c,description:"Wall",min:0,max:999999},{type:"number",value:d,description:"Cannons",min:0,max:999999},{type:"number",value:p,description:"Healer",min:0,max:999999},{type:"number",value:h,description:"Generator",min:0,max:999999},{type:"number",value:l,description:"Economy",min:0,max:999999}]}}const o=new Y;class J{generateXML(e){const r=58.7077197265625,l=12,c=22,d=2,p=26,h=18,I=40,y=662,S=1,m=parseInt(e.info.playerID.substring(7)),x=o.params[0].value;if(x>0){e.addKey("PHR","INT",x,"Sec");let g=0;for(let F=0;F<x;F++)g=(g+39)*1.2;e.addKey("PR","FIXED",g,"Sec")}else e.removeKey("PR","Sec"),e.removeKey("PHR","Sec");const s=o.params[1].value;e.addKey("NIVO","FIXED",s,"Sec"),e.addKey("NIVEXP","FIXED",s*1224,"Sec");const n=o.params[2].value;e.addKey("WINS","FIXED",n,"Sec");const f=o.params[3].value;f>0?(e.addKey("NIGHTMNHD","FIXED",f,"Sec"),e.addKey("KILLED","FIXED",f*4788,"Sec"),f>=35?e.addKey("ZUHIB","FIXED",121186,"Sec"):e.removeKey("ZUHIB","Sec")):(e.removeKey("NIGHTMNHD","Sec"),e.removeKey("KILLED","Sec"),e.removeKey("ZUHIB","Sec"));const H=o.params[4].value;H>0?(e.addKey("NIGHTELITE","FIXED",H,"Sec"),H>=35&&e.addKey("HEAL","FIXED",21634,"Sec")):(e.removeKey("NIGHTELITE","Sec"),e.removeKey("HEAL","Sec"));const D=o.params[5].value;D>0?(e.addKey("NIGHTNMAR","FIXED",D,"Sec"),e.addKey("XPNB","FIXED",D*1655,"Sec"),D>=35&&e.addKey("XPNQ","FIXED",59120,"Sec")):(e.removeKey("NIGHTNMAR","Sec"),e.removeKey("XPNB","Sec"),e.removeKey("XPNQ","Sec"));const C=o.params[6].value;C>0?(e.addKey("HL","FIXED",C,"Sec"),e.addKey("HAL","FIXED",C*1631,"Sec"),C>=35&&e.addKey("HLO","FIXED",25265,"Sec")):(e.removeKey("HL","Sec"),e.removeKey("HAL","Sec"),e.removeKey("HLO","Sec"));const K=o.params[7].value;if(K>0){e.addKey("ims","INT",K,"Sec");const g=Math.abs(t(K*10,Math.abs(t(Math.round(t(t(r,i(5))*t(86,i(8))*t(l,i(3))*t(c,i(2))*t(d,i(7))*t(p,i(3))*t(h,i(6))*t(I,i(7))*t(y,i(5))*t(S,i(3))*t(m,65537),i(3))*1e4)/1e3,10))));if(e.addKey("im","FIXED",g+K*10,"Sec"),K>=35){const F=Math.round(t(t(r,i(3))*t(86,i(2))*t(l,i(7))*t(c,i(8))*t(d,i(17))*t(p,i(3))*t(h,i(2))*t(I,i(5))*t(y,i(11))*t(S,i(5))*t(m,65537),i(10))*1e4)/1e3;e.addKey("is","FIXED",g/F*3.4,"Sec");const G=Math.round(t(t(r,i(2))*t(86,i(3))*t(l,i(6))*t(c,i(5))*t(d,i(7))*t(p,i(3))*t(h,i(2))*t(I,i(5))*t(y,i(11))*t(S,i(5))*t(m,65537),i(10))*1e4)/1e3;e.addKey("imval","FIXED",G,"Sec")}else e.removeKey("imval","Sec")}else e.removeKey("HL","Sec"),e.removeKey("HAL","Sec"),e.removeKey("HLO","Sec"),e.removeKey("imval","Sec");const j=o.params[8].value;j>0?e.addKey("a","INT",j*4,"Sec"):e.removeKey("a","Sec");const A=o.params[9].value;A>0?e.addKey("e","INT",A*7,"Sec"):e.removeKey("e","Sec");const R=o.params[10].value;R>0?e.addKey("i","INT",R*9,"Sec"):e.removeKey("i","Sec");const w=o.params[11].value;w>0?e.addKey("f","INT",w*5,"Sec"):e.removeKey("f","Sec");const P=o.params[12].value;return P>0?e.addKey("o","INT",P*13,"Sec"):e.removeKey("o","Sec"),e.addKey("EASY","FIXED",35,"Sec"),e.addKey("VERSION","FIXED",6,"Sec"),e.updateSignature(),e.getAsString()}parse(e,r){return e.parse(r),e.sections.size!=1||e.sections.get("Sec")==null?(console.error("Wrong bank file!"),null):[{type:"number",value:this.getKey(e,"PHR"),description:"Prestige",min:0,max:40,tip:"0 - 40"},{type:"number",value:this.getKey(e,"NIVO"),description:"Level",min:1,max:200,tip:"1 - 200"},{type:"number",value:this.getKey(e,"WINS"),description:"Wins",min:0,max:999999},{type:"number",value:this.getKey(e,"NIGHTMNHD"),description:"Nights",min:0,max:35,tip:"0 - 35"},{type:"number",value:this.getKey(e,"NIGHTELITE"),description:"Elite",min:0,max:35,tip:"0 - 35"},{type:"number",value:this.getKey(e,"NIGHTNMAR"),description:"Nightmare",min:0,max:35,tip:"0 - 35"},{type:"number",value:this.getKey(e,"HL"),description:"Hell",min:0,max:35,tip:"0 - 35"},{type:"number",value:this.getKey(e,"ims"),description:"Impossible",min:0,max:35,tip:"0 - 35"},{type:"number",value:this.getKey(e,"a")/4,description:"Wall",min:0,max:999999},{type:"number",value:this.getKey(e,"e")/7,description:"Cannons",min:0,max:999999},{type:"number",value:this.getKey(e,"i")/9,description:"Healer",min:0,max:999999},{type:"number",value:this.getKey(e,"f")/5,description:"Generator",min:0,max:999999},{type:"number",value:this.getKey(e,"o")/13,description:"Economy",min:0,max:999999}]}getKey(e,r){const l=e.getKey(r,"Sec");return l?parseInt(l.value):0}}const X=new J,$=V(N=>{const{accountStore:e,menuStore:r,mapStore:l}=Z(),[c,d]=u.useState(N.bankName),[p,h]=u.useState(L.get(T.MINERALZ_EVOLUTION).authorID),I=L.get(T.MINERALZ_EVOLUTION).title,y=u.useMemo(()=>new q(c,p,r.playerID,"1"),[e.current,r.playerID,c,p]),S=()=>{l.setMapData(e.current,I,o.params)};u.useEffect(()=>{var n;const s=(n=l.list[e.current])==null?void 0:n[I];s?o.setFields(s):setTimeout(m.onResetClick)},[e.current]);const m={onBankNameChange:u.useCallback(s=>{d(s)},[]),onAuthorIdChange:u.useCallback(s=>{h(s)},[]),onFileDrop:u.useCallback((s,n)=>{const f=X.parse(y,n);f&&(O.flushSync(()=>o.setFields()),o.setFields(f))},[]),onDownloadClick:u.useCallback(()=>{b(X.generateXML(y),c+".SC2Bank",!0),r.autoSave||S()},[y]),onCopyCodeClick:u.useCallback(()=>{_(X.generateXML(y),!0),r.autoSave||S()},[y]),onResetClick:u.useCallback(()=>{d(N.bankName),h(L.get(T.MINERALZ_EVOLUTION).authorID),O.flushSync(()=>o.setFields()),o.reset()},[]),onFieldChange:u.useCallback((s,n)=>{o.updateAt(n,parseInt(s),!0),r.autoSave&&S()},[])},x=u.useMemo(()=>a.jsxs(E,{style:{flexDirection:"column"},children:[a.jsxs(z,{style:{width:"500px"},children:["Note: the community of this map closely monitors the statistics of the players and their skills.",a.jsx("br",{}),a.jsx("br",{}),a.jsx("b",{children:"Use the hack wisely, be prepared for a skill test!"}),a.jsx("br",{}),a.jsx("br",{}),"The ",a.jsx("b",{children:"Reset"})," button generates random real stats, but avoid using it with more than ",a.jsx("b",{children:"5 Prestige"})," / ",a.jsx("b",{children:"5 Impossible"}),".",a.jsx("br",{})]}),a.jsx(B,{children:"Main stats:"}),a.jsx(E,{style:{flexDirection:"row",border:"1px solid #ffffff40",padding:"10px",justifyContent:"space-around"},alignInputs:!0,children:o.params.map((s,n)=>n<3?a.jsx(M,{index:n,type:"number",style:{width:"50px"},label:s.description+":",onChange:m.onFieldChange,min:s.min.toString(),max:s.max.toString(),value:s.value.toString(),tip:s.tip?s.tip:null},n):null)}),a.jsx(B,{children:"Survived nights and roles:"}),a.jsxs(E,{style:{flexDirection:"row"},children:[a.jsx(E,{style:{flexDirection:"column",border:"1px solid #ffffff40",padding:"10px"},alignInputs:!0,children:o.params.map((s,n)=>n>=3&&n<8?a.jsx(M,{index:n,type:"number",style:{width:"30px"},label:s.description+":",onChange:m.onFieldChange,min:s.min.toString(),max:s.max.toString(),value:s.value.toString(),tip:s.tip?s.tip:null},n):null)}),a.jsx(E,{style:{flexDirection:"column",border:"1px solid #ffffff40",padding:"10px"},alignInputs:!0,children:o.params.map((s,n)=>n>=8?a.jsx(M,{index:n,type:"number",style:{width:"50px"},label:s.description+":",onChange:m.onFieldChange,min:s.min.toString(),max:s.max.toString(),value:s.value.toString(),tip:s.tip?s.tip:null},n):null)})]})]}),[o.params]);return a.jsx(Q,{bankName:c,authorID:p,onBankNameChange:m.onBankNameChange,onAuthorIdChange:m.onAuthorIdChange,onFileDrop:m.onFileDrop,onDownload:m.onDownloadClick,onCopy:m.onCopyCodeClick,onReset:m.onResetClick,children:x})}),te=U.memo($);export{te as default};
